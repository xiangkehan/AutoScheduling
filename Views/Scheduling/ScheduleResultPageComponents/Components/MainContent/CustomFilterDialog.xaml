<ContentDialog
    x:Class="AutoScheduling3.Views.Scheduling.ScheduleResultPageComponents.Components.MainContent.CustomFilterDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:AutoScheduling3.Converters"
    xmlns:local="using:AutoScheduling3.Views.Scheduling.ScheduleResultPageComponents.Components.MainContent"
    mc:Ignorable="d"
    Title="自定义筛选"
    PrimaryButtonText="应用"
    SecondaryButtonText="取消"
    CloseButtonText="清除"
    DefaultButton="Primary">

    <ContentDialog.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <converters:InvertedBooleanConverter x:Key="InvertedBooleanConverter"/>
    </ContentDialog.Resources>

    <Grid Width="600" Height="Auto" Padding="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 筛选预设 -->
        <Grid Grid.Row="0" Margin="0,0,0,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <ComboBox x:Name="PresetComboBox" 
                      Grid.Column="0"
                      PlaceholderText="选择预设筛选" 
                      Margin="0,0,8,0"/>
            
            <Button Grid.Column="1"
                    Content="保存预设" 
                    Click="SavePresetButton_Click"
                    Style="{ThemeResource ButtonStyle}" 
                    Margin="0,0,8,0"/>
            
            <Button Grid.Column="2"
                    Content="删除预设" 
                    Click="DeletePresetButton_Click"
                    Style="{ThemeResource ButtonStyle}"/>
        </Grid>
        
        <!-- 筛选条件 -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Hidden">
            <StackPanel Spacing="24">
                <!-- 日期范围筛选 -->
                <StackPanel>
                    <TextBlock Text="日期范围" 
                               FontSize="16" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,12"/>
                    
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <DatePicker x:Name="StartDatePicker" 
                                    Header="开始日期" 
                                    Width="200"/>
                        <DatePicker x:Name="EndDatePicker" 
                                    Header="结束日期" 
                                    Width="200"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- 人员筛选 -->
                <StackPanel>
                    <TextBlock Text="人员" 
                               FontSize="16" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,12"/>
                    
                    <AutoSuggestBox x:Name="PersonnelSearchBox" 
                                    PlaceholderText="搜索人员..." 
                                    Width="400"/>
                    
                    <ItemsRepeater x:Name="PersonnelList" 
                                  Margin="0,12,0,0">
                        <ItemsRepeater.Layout>
                            <StackLayout Orientation="Vertical" Spacing="8"/>
                        </ItemsRepeater.Layout>
                        <ItemsRepeater.ItemTemplate>
                            <DataTemplate x:DataType="local:FilterItem">
                                <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                    <CheckBox IsChecked="{x:Bind IsSelected, Mode=TwoWay}"/>
                                    <TextBlock Text="{x:Bind Name, Mode=OneWay}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsRepeater.ItemTemplate>
                    </ItemsRepeater>
                </StackPanel>
                
                <!-- 哨位筛选 -->
                <StackPanel>
                    <TextBlock Text="哨位" 
                               FontSize="16" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,12"/>
                    
                    <AutoSuggestBox x:Name="PositionSearchBox" 
                                    PlaceholderText="搜索哨位..." 
                                    Width="400"/>
                    
                    <ItemsRepeater x:Name="PositionList" 
                                  Margin="0,12,0,0">
                        <ItemsRepeater.Layout>
                            <StackLayout Orientation="Vertical" Spacing="8"/>
                        </ItemsRepeater.Layout>
                        <ItemsRepeater.ItemTemplate>
                            <DataTemplate x:DataType="local:FilterItem">
                                <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                    <CheckBox IsChecked="{x:Bind IsSelected, Mode=TwoWay}"/>
                                    <TextBlock Text="{x:Bind Name, Mode=OneWay}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsRepeater.ItemTemplate>
                    </ItemsRepeater>
                </StackPanel>
                
                <!-- 时段筛选 -->
                <StackPanel>
                    <TextBlock Text="时段" 
                               FontSize="16" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,12"/>
                    
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <CheckBox x:Name="DayShiftCheckBox" Content="日哨 (08:00-20:00)"/>
                        <CheckBox x:Name="NightShiftCheckBox" Content="夜哨 (20:00-08:00)"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- 状态筛选 -->
                <StackPanel>
                    <TextBlock Text="状态" 
                               FontSize="16" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,12"/>
                    
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <CheckBox x:Name="HasConflictCheckBox" Content="有冲突"/>
                        <CheckBox x:Name="AssignedCheckBox" Content="已分配"/>
                        <CheckBox x:Name="UnassignedCheckBox" Content="未分配"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
        
        <!-- 保存预设对话框 -->
        <ContentDialog x:Name="SavePresetDialog" 
                      Title="保存预设" 
                      PrimaryButtonText="保存" 
                      SecondaryButtonText="取消" 
                      DefaultButton="Primary">
            <StackPanel Spacing="12">
                <TextBlock Text="预设名称:"/>
                <TextBox x:Name="PresetNameTextBox" 
                         PlaceholderText="输入预设名称..." 
                         Width="300"/>
            </StackPanel>
        </ContentDialog>
    </Grid>
</ContentDialog>