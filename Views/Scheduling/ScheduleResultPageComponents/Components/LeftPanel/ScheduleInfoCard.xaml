<UserControl
    x:Class="AutoScheduling3.Views.Scheduling.ScheduleResultPageComponents.Components.LeftPanel.ScheduleInfoCard"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:AutoScheduling3.Converters"
    mc:Ignorable="d"
    Background="Transparent">

    <UserControl.Resources>
        <converters:DateTimeFormatConverter x:Key="DateTimeFormatConverter"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
    </UserControl.Resources>

    <StackPanel Spacing="12">
        <!-- 标题区域 -->
        <StackPanel>
            <TextBlock Text="{x:Bind ViewModel.Schedule.Title, Mode=OneWay, FallbackValue='排班结果'}" 
                       Style="{ThemeResource TitleTextBlockStyle}" 
                       TextWrapping="WrapWholeWords"/>
            <!-- 草稿/已确认标识 -->
            <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4,0,0">
                <Border Background="{ThemeResource AccentFillColorDefaultBrush}"
                        CornerRadius="4"
                        Padding="6,2"
                        Visibility="{x:Bind ViewModel.Schedule.ConfirmedAt, Mode=OneWay, Converter={StaticResource NullToVisibilityConverter}, ConverterParameter='invert'}">
                    <TextBlock Text="草稿" 
                               FontSize="12" 
                               FontWeight="SemiBold" 
                               Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"/>
                </Border>
                <Border Background="{ThemeResource SystemFillColorSuccessBrush}"
                        CornerRadius="4"
                        Padding="6,2"
                        Visibility="{x:Bind ViewModel.Schedule.ConfirmedAt, Mode=OneWay, Converter={StaticResource NullToVisibilityConverter}}">
                    <TextBlock Text="已确认" 
                               FontSize="12" 
                               FontWeight="SemiBold" 
                               Foreground="White"/>
                </Border>
            </StackPanel>
        </StackPanel>

        <!-- 日期范围 -->
        <StackPanel Spacing="4">
            <TextBlock Text="日期范围" 
                       Style="{ThemeResource CaptionTextBlockStyle}" 
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            <TextBlock>
                <Run Text="{x:Bind ViewModel.Schedule.StartDate, Mode=OneWay, Converter={StaticResource DateTimeFormatConverter}, ConverterParameter='yyyy-MM-dd'}"/>
                <Run Text=" 至 "/>
                <Run Text="{x:Bind ViewModel.Schedule.EndDate, Mode=OneWay, Converter={StaticResource DateTimeFormatConverter}, ConverterParameter='yyyy-MM-dd'}"/>
            </TextBlock>
        </StackPanel>

        <!-- 统计信息 -->
        <StackPanel Spacing="4">
            <TextBlock Text="基本信息" 
                       Style="{ThemeResource CaptionTextBlockStyle}" 
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Spacing="2">
                    <TextBlock Text="人员数量" 
                               FontSize="12" 
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock Text="{x:Bind ViewModel.Schedule.PersonnelCount, Mode=OneWay}" 
                               FontWeight="SemiBold"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Spacing="2">
                    <TextBlock Text="哨位数量" 
                               FontSize="12" 
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock Text="{x:Bind ViewModel.Schedule.PositionCount, Mode=OneWay}" 
                               FontWeight="SemiBold"/>
                </StackPanel>
            </Grid>
        </StackPanel>
    </StackPanel>
</UserControl>