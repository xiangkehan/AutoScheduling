<UserControl
    x:Class="AutoScheduling3.Views.Scheduling.ScheduleResultPageComponents.Components.RightPanel.RightDetailPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:AutoScheduling3.Converters"
    xmlns:local="using:AutoScheduling3.Views.Scheduling.ScheduleResultPageComponents.Components.RightPanel"
    mc:Ignorable="d"
    Background="Transparent">

    <UserControl.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <Border Grid.Row="0"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,0,0,1"
                Padding="16">
            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Stretch">
                <TextBlock Text="{x:Bind ViewModel.DetailPanelTitle, Mode=OneWay, FallbackValue='详情'}" 
                           Style="{ThemeResource TitleTextBlockStyle}" 
                           VerticalAlignment="Center"/>
                <!-- 占位符，将关闭按钮推到右侧 -->
                <Grid HorizontalAlignment="Stretch"/>
                <Button Content="关闭" 
                        Command="{x:Bind ViewModel.CloseDetailPanelCommand}"
                        Style="{ThemeResource TextButtonStyle}"/>
            </StackPanel>
        </Border>

        <!-- 详情内容 -->
        <Border Grid.Row="1"
                Background="{ThemeResource LayerFillColorDefaultBrush}"
                Padding="16">
            <!-- 详情模板选择器 -->
            <ContentPresenter Content="{x:Bind ViewModel.SelectedItem, Mode=OneWay}">
                <ContentPresenter.ContentTemplateSelector>
                    <local:DetailTemplateSelector/>
                </ContentPresenter.ContentTemplateSelector>
            </ContentPresenter>
        </Border>

        <!-- 操作按钮 -->
        <Border Grid.Row="2"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1,0,0,0"
                Padding="16">
            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Stretch">
                <!-- 占位符，将操作按钮推到右侧 -->
                <Grid HorizontalAlignment="Stretch"/>
                <Button Content="保存" 
                        Command="{x:Bind ViewModel.SaveDetailChangesCommand}"
                        Style="{ThemeResource AccentButtonStyle}"/>
                <Button Content="取消" 
                        Command="{x:Bind ViewModel.CancelDetailChangesCommand}"
                        Style="{ThemeResource ButtonStyle}"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>