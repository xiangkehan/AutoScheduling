<ContentDialog
    x:Class="AutoScheduling3.Views.DataManagement.PositionEditDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:dto="using:AutoScheduling3.DTOs"
    mc:Ignorable="d"
    Title="编辑哨位"
    PrimaryButtonText="保存"
    SecondaryButtonText="取消"
    DefaultButton="Primary"
    PrimaryButtonClick="ContentDialog_PrimaryButtonClick"
    Opened="ContentDialog_Opened">

    <ScrollViewer MaxHeight="500">
        <StackPanel Spacing="12">
            <!-- 哨位名称 -->
            <StackPanel>
                <TextBox x:Name="NameTextBox"
                         Header="哨位名称*"
                         PlaceholderText="请输入哨位名称"
                         MaxLength="100"
                         TabIndex="0"
                         TextChanged="ValidateInput"/>
                <TextBlock x:Name="NameErrorText"
                           Foreground="Red"
                           FontSize="12"
                           Margin="0,4,0,0"
                           Visibility="Collapsed"/>
            </StackPanel>

            <!-- 地点 -->
            <StackPanel>
                <TextBox x:Name="LocationTextBox"
                         Header="地点*"
                         PlaceholderText="请输入地点"
                         MaxLength="200"
                         TabIndex="1"
                         TextChanged="ValidateInput"/>
                <TextBlock x:Name="LocationErrorText"
                           Foreground="Red"
                           FontSize="12"
                           Margin="0,4,0,0"
                           Visibility="Collapsed"/>
            </StackPanel>

            <!-- 介绍 -->
            <TextBox x:Name="DescriptionTextBox"
                     Header="介绍"
                     PlaceholderText="请输入介绍（可选）"
                     MaxLength="500"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     Height="80"
                     TabIndex="2"/>

            <!-- 所需技能 -->
            <StackPanel>
                <Grid Margin="0,0,0,4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               Text="所需技能"
                               FontWeight="SemiBold"/>

                    <TextBlock x:Name="SkillCountText"
                               Grid.Column="2"
                               Text="已选择: 0"
                               FontSize="12"
                               Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                               VerticalAlignment="Center"/>
                </Grid>

                <ListView x:Name="SkillsListView"
                          SelectionMode="Multiple"
                          MaxHeight="150"
                          TabIndex="3"
                          SelectionChanged="SkillsListView_SelectionChanged"
                          DisplayMemberPath="Name"/>
            </StackPanel>

            <!-- 验证错误提示 -->
            <InfoBar x:Name="ValidationErrorBar"
                     Severity="Error"
                     IsOpen="False"
                     IsClosable="True"/>
        </StackPanel>
    </ScrollViewer>
</ContentDialog>
