<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="AutoScheduling3.Views.Settings.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Themes/ThemeResources.xaml"/>
                <ResourceDictionary Source="/Themes/AnimationResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <ScrollViewer>
        <StackPanel Margin="24" Spacing="24" MaxWidth="800">
            
            <!-- 页面标题 -->
            <TextBlock Text="设置" 
                       Style="{StaticResource TitleTextStyle}"
                       AutomationProperties.HeadingLevel="Level1"/>

            <!-- 外观设置 -->
            <Border Style="{StaticResource EnhancedCardStyle}">
                <Border.RenderTransform>
                    <CompositeTransform/>
                </Border.RenderTransform>
                <StackPanel Spacing="16">
                    <TextBlock Text="外观" 
                               Style="{StaticResource SubtitleTextStyle}"
                               AutomationProperties.HeadingLevel="Level2"/>
                    
                    <!-- 主题选择 -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="主题" 
                                   Style="{StaticResource AccessibleTextStyle}"
                                   FontWeight="Medium"/>
                        <ComboBox x:Name="ThemeComboBox"
                                  MinWidth="200"
                                  SelectionChanged="ThemeComboBox_SelectionChanged"
                                  AutomationProperties.Name="选择应用主题">
                            <ComboBoxItem Content="跟随系统" Tag="Default"/>
                            <ComboBoxItem Content="浅色" Tag="Light"/>
                            <ComboBoxItem Content="深色" Tag="Dark"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- 高对比度模式 -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="高对比度模式" 
                                   Style="{StaticResource AccessibleTextStyle}"
                                   FontWeight="Medium"/>
                        <ToggleSwitch x:Name="HighContrastToggle"
                                      OnContent="开启"
                                      OffContent="关闭"
                                      Toggled="HighContrastToggle_Toggled"
                                      AutomationProperties.Name="切换高对比度模式"/>
                        <TextBlock Text="提高界面元素的对比度，便于视觉障碍用户使用"
                                   Style="{StaticResource AccessibleTextStyle}"
                                   Foreground="{ThemeResource TextSecondaryBrush}"
                                   FontSize="12"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 动画设置 -->
            <Border Style="{StaticResource EnhancedCardStyle}">
                <StackPanel Spacing="16">
                    <TextBlock Text="动画与交互" 
                               Style="{StaticResource SubtitleTextStyle}"
                               AutomationProperties.HeadingLevel="Level2"/>
                    
                    <!-- 启用动画 -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="启用动画效果" 
                                   Style="{StaticResource AccessibleTextStyle}"
                                   FontWeight="Medium"/>
                        <ToggleSwitch x:Name="AnimationToggle"
                                      OnContent="开启"
                                      OffContent="关闭"
                                      Toggled="AnimationToggle_Toggled"
                                      AutomationProperties.Name="切换动画效果"/>
                        <TextBlock Text="关闭动画可以提高性能并减少干扰"
                                   Style="{StaticResource AccessibleTextStyle}"
                                   Foreground="{ThemeResource TextSecondaryBrush}"
                                   FontSize="12"/>
                    </StackPanel>

                    <!-- 动画速度 -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="动画速度" 
                                   Style="{StaticResource AccessibleTextStyle}"
                                   FontWeight="Medium"/>
                        <Slider x:Name="AnimationSpeedSlider"
                                Minimum="0.5"
                                Maximum="2.0"
                                Value="1.0"
                                StepFrequency="0.1"
                                TickFrequency="0.5"
                                TickPlacement="BottomRight"
                                ValueChanged="AnimationSpeedSlider_ValueChanged"
                                AutomationProperties.Name="调整动画速度"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="慢" HorizontalAlignment="Left"
                                       Style="{StaticResource AccessibleTextStyle}"
                                       Foreground="{ThemeResource TextSecondaryBrush}"
                                       FontSize="12"/>
                            <TextBlock Grid.Column="1" x:Name="SpeedValueText" Text="1.0x"
                                       Style="{StaticResource AccessibleTextStyle}"
                                       FontWeight="Medium"/>
                            <TextBlock Grid.Column="2" Text="快" HorizontalAlignment="Right"
                                       Style="{StaticResource AccessibleTextStyle}"
                                       Foreground="{ThemeResource TextSecondaryBrush}"
                                       FontSize="12"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 无障碍设置 -->
            <Border Style="{StaticResource EnhancedCardStyle}">
                <StackPanel Spacing="16">
                    <TextBlock Text="无障碍" 
                               Style="{StaticResource SubtitleTextStyle}"
                               AutomationProperties.HeadingLevel="Level2"/>
                    
                    <!-- 字体大小 -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="字体大小" 
                                   Style="{StaticResource AccessibleTextStyle}"
                                   FontWeight="Medium"/>
                        <ComboBox x:Name="FontSizeComboBox"
                                  MinWidth="200"
                                  SelectionChanged="FontSizeComboBox_SelectionChanged"
                                  AutomationProperties.Name="选择字体大小">
                            <ComboBoxItem Content="小 (12px)" Tag="12"/>
                            <ComboBoxItem Content="标准 (14px)" Tag="14" IsSelected="True"/>
                            <ComboBoxItem Content="大 (16px)" Tag="16"/>
                            <ComboBoxItem Content="特大 (18px)" Tag="18"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- 键盘导航提示 -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="显示键盘导航提示" 
                                   Style="{StaticResource AccessibleTextStyle}"
                                   FontWeight="Medium"/>
                        <ToggleSwitch x:Name="KeyboardHintsToggle"
                                      OnContent="显示"
                                      OffContent="隐藏"
                                      Toggled="KeyboardHintsToggle_Toggled"
                                      AutomationProperties.Name="切换键盘导航提示"/>
                        <TextBlock Text="显示键盘快捷键和导航提示"
                                   Style="{StaticResource AccessibleTextStyle}"
                                   Foreground="{ThemeResource TextSecondaryBrush}"
                                   FontSize="12"/>
                    </StackPanel>

                    <!-- 屏幕阅读器优化 -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="屏幕阅读器优化" 
                                   Style="{StaticResource AccessibleTextStyle}"
                                   FontWeight="Medium"/>
                        <ToggleSwitch x:Name="ScreenReaderToggle"
                                      OnContent="开启"
                                      OffContent="关闭"
                                      Toggled="ScreenReaderToggle_Toggled"
                                      AutomationProperties.Name="切换屏幕阅读器优化"/>
                        <TextBlock Text="为屏幕阅读器提供更详细的描述信息"
                                   Style="{StaticResource AccessibleTextStyle}"
                                   Foreground="{ThemeResource TextSecondaryBrush}"
                                   FontSize="12"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 性能设置 -->
            <Border Style="{StaticResource EnhancedCardStyle}">
                <StackPanel Spacing="16">
                    <TextBlock Text="性能" 
                               Style="{StaticResource SubtitleTextStyle}"
                               AutomationProperties.HeadingLevel="Level2"/>
                    
                    <!-- 减少视觉效果 -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="减少视觉效果" 
                                   Style="{StaticResource AccessibleTextStyle}"
                                   FontWeight="Medium"/>
                        <ToggleSwitch x:Name="ReduceEffectsToggle"
                                      OnContent="开启"
                                      OffContent="关闭"
                                      Toggled="ReduceEffectsToggle_Toggled"
                                      AutomationProperties.Name="切换减少视觉效果"/>
                        <TextBlock Text="关闭阴影、透明度等效果以提高性能"
                                   Style="{StaticResource AccessibleTextStyle}"
                                   Foreground="{ThemeResource TextSecondaryBrush}"
                                   FontSize="12"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 重置设置 -->
            <Border Style="{StaticResource EnhancedCardStyle}">
                <StackPanel Spacing="16">
                    <TextBlock Text="重置" 
                               Style="{StaticResource SubtitleTextStyle}"
                               AutomationProperties.HeadingLevel="Level2"/>
                    
                    <Button x:Name="ResetButton"
                            Content="重置所有设置"
                            Style="{StaticResource EnhancedButtonStyle}"
                            Background="{ThemeResource ErrorBrush}"
                            Click="ResetButton_Click"
                            AutomationProperties.Name="重置所有设置到默认值"/>
                    
                    <TextBlock Text="这将重置所有个性化设置到默认值"
                               Style="{StaticResource AccessibleTextStyle}"
                               Foreground="{ThemeResource TextSecondaryBrush}"
                               FontSize="12"/>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</Page>