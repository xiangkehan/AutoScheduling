# 排班结果页面UI/UX改进方案

## 1. 设计理念

当前页面功能强大但信息密度过高，导致关键信息不够突出，操作流程略显复杂。新的设计方案旨在通过**优化布局**、**简化信息层级**和**增强数据可视化**，来提升用户体验，让排班管理者能够更快速、更直观地洞察问题并进行决策。

核心思路：
- **聚焦核心内容**：将排班表格作为绝对的视觉中心。
- **分离导航与操作**：将“看什么”（视图切换、摘要）与“做什么”（筛选、编辑、确认）清晰分离。
- **上下文驱动**：右侧面板始终服务于主内容区的当前上下文（如查看冲突详情、编辑班次）。

## 2. 布局草图 (ASCII Art)

我们建议采用经典的三栏式布局，将界面划分为**导航/摘要区 (左)**、**主内容区 (中)** 和 **上下文详情区 (右)**。

```
+------------------------------------------------------------------------------------------------------------------------------------+
|                                                        排班结果页面 - 新版设计                                                       |
+------------------------------------------------------------------------------------------------------------------------------------+
| 左侧导航/摘要区                               | 主内容区                                                 | 右侧上下文详情区         |
|-----------------------------------------------|----------------------------------------------------------|--------------------------|
|                                               |                                                          |                          |
|  +-----------------------------------------+  |  +-----------------------------------------------------+   |  +----------------------+  |
|  | SCHEDULE-2024-Q3                        |  |  | [>] 筛选与搜索 (日期, 哨位, 人员...) [可折叠]         |   |  | 冲突详情 / 班次编辑  |  |
|  | (草稿)                                  |  |  +-----------------------------------------------------+   |  |----------------------|  |
|  | 2024-07-01 至 2024-09-30                |  |                                                          |  |                          |
|  +-----------------------------------------+  |  +-----------------------------------------------------+   |  | [冲突] 人员连续工作超限|  |
|                                               |  | [网格] [列表] [按人员] [按哨位]   [导出] [比较] [全屏] |   |  |                          |
|  +-----------------------------------------+  |  +-----------------------------------------------------+   |  |  人员: 张三            |  |
|  | ?? 统计摘要                             |  |                                                          |  |  时间: 2024-07-05      |  |
|  |                                         |  |  +---------------------------------------------------+   |  |  ...                     |  |
|  | ?? 硬约束冲突: 5                        |  |  |                                                   |   |  |                          |  |
|  | ?? 软约束冲突: 12                       |  |  |                                                   |   |  |  [建议操作]            |  |
|  | ? 未分配班次: 3                        |  |  |                排班网格/列表视图                    |   |  |  - 替换人员...         |  |
|  |                                         |  |  |                                                   |   |  |  - 标记为已忽略        |  |
|  +-----------------------------------------+  |  |                                                   |   |  |                          |  |
|                                               |  |                                                   |   |  |  [ 定位到表格 ]        |  |
|  +-----------------------------------------+  |  |                                                   |   |  |  [ 忽略 ] [ 解决 ]     |  |
|  | ?? 冲突列表 (17)                        |  |  |                                                   |   |  |                          |  |
|  |   [按类型排序 v] [搜索...]              |  |  |                                                   |   |  |                          |  |
|  |   -----------------------------------   |  |  |                                                   |   |  |                          |  |
|  | > [硬] 张三 连续工作超限 @ 7/5          |  |  |                                                   |   |  |                          |  |
|  |   [软] 李四 休息时间不足 @ 7/8          |  |  +---------------------------------------------------+   |  |                          |  |
|  |   ...                                   |  |                                                          |  |                          |  |
|  +-----------------------------------------+  |                                                          |  +----------------------+  |
|                                               |                                                          |                          |
|                                               |----------------------------------------------------------|                          |
|                                               | [!] 您有未保存的更改   [撤销] [保存] [返回] [确认排班]    |                          |
|                                               +----------------------------------------------------------+                          |
|                                               |                                                          |                          |
+------------------------------------------------------------------------------------------------------------------------------------+
```

## 3. 区域详细说明

### 3.1. 左侧导航/摘要区 (取代原`SplitView.Pane`的部分功能)

- **固定展示，始终可见**，为用户提供稳定的导航和信息锚点。
- **顶部：排班信息**
    - 显示当前排班的标题、状态（草稿/已确认）和日期范围。简洁明了。
- **中部：关键统计摘要**
    - **可视化**：用醒目的颜色（红/黄/灰）和图标直接展示最重要的三项指标：硬约束冲突、软约束冲突、未分配班次。用户一进入页面就能感知排班质量。
    - **可交互**：点击各项指标可以直接在主内容区的表格中高亮显示所有对应项，并在下方的冲突列表中进行筛选。
- **下部：冲突列表**
    - 将冲突列表从右侧面板移至左侧，作为核心导航的一部分。
    - 用户可以快速浏览所有冲突，点击任何一项，主内容区的表格会**自动定位**到该冲突所在单元格，同时右侧的**上下文详情区**会显示该冲突的详细信息和解决方案。

### 3.2. 主内容区 (核心工作区)

- **顶部：筛选与视图控制**
    - **筛选栏**：默认折叠，只显示一个“筛选与搜索”的入口，点击后展开。节省了大量垂直空间，让用户更专注于表格。
    - **视图切换器**：使用一组紧凑的按钮（如 `SegmentedControl`）进行视图切换，比原先的 `RadioButton` 更节省空间。
    - **主要操作**：将“导出”、“比较”、“全屏”等全局操作整合在视图切换器旁边，形成统一的工具栏。
- **中部：排班表格/列表**
    - 这是页面的核心，占据最大面积。根据左侧或顶部的操作（如点击冲突、筛选）动态高亮和过滤数据。
- **底部：底部操作栏**
    - 与原设计类似，固定在页面底部，提供“保存”、“确认”等最终操作。

### 3.3. 右侧上下文详情区 (取代原`SplitView.Pane`的另一部分功能)

- **动态显示，按需出现**。默认情况下可以隐藏或显示欢迎信息。
- **单一职责**：只用于显示在主内容区或左侧列表中**当前选中项**的详细信息。
    - **选中一个冲突时**：显示该冲突的详细描述、涉及的人员/哨位/时间、规则说明以及建议的修复操作（如“替换人员”、“调整班次”、“标记为忽略”）。
    - **选中一个班次时**：显示班次的编辑界面，允许用户直接修改人员分配。
    - **选中一个人员/哨位时**：显示该人员/哨位的详细排班日历或统计信息。
- 这种设计避免了原先右侧面板在“搜索结果”和“冲突管理”两个角色间切换的混乱感，交互逻辑更清晰。

## 4. 改进带来的优势

1.  **视觉焦点更清晰**：用户视线自然地聚焦在中间的排班表上。
2.  **信息获取效率更高**：左侧摘要区让关键问题一目了然。
3.  **操作流程更顺畅**：`左侧发现问题 -> 中间定位问题 -> 右侧解决问题` 的工作流非常自然。
4.  **界面更整洁**：通过折叠筛选栏和采用更紧凑的控件，减少了视觉噪音。
5.  **扩展性更好**：未来如果增加新的统计维度或导航项，可以方便地在左侧区域扩展。

这个设计方案旨在保留所有强大功能的同时，通过重构界面布局和交互流程，显著提升可用性和用户满意度。
